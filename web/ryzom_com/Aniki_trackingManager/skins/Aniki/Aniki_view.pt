<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"
	i18n:domain="RingRanking"
	metal:use-macro="here/main_template/macros/master">

<metal:block fill-slot="css_slot">
	<style type="text/css" media="screen"
		tal:content="string:@import url(${portal_url}/css/aniki.css);">
   </style>

</metal:block>

<metal:block fill-slot="javascript_head_slot">
	<script src="" type="text/javascript"
		tal:attributes="src string:${portal_url}/js/ajax.js"></script>

	<script type="text/javascript">
		// <![CDATA[
		
function filter(url){
	// fonction qui met a jour le tableau des scores
	var res="";
	var formulaire = document.getElementById("score");
	if( formulaire.all.checked == true) res = "all";
	if( formulaire.fr.checked == true) res = "fr";
	if( formulaire.en.checked == true) res = "en";
	if( formulaire.de.checked == true) res = "de";
	res = url+"/Aniki_UpdateView?filter="+res;

	sendRequestAndChangeContent("score", res);
}

		// ]]>
	</script>
</metal:block>

<body>

<div metal:fill-slot="main" tal:define="url python:here.absolute_url();">

<h1 tal:content="here/title"></h1>
<p>liste des pubs pour cette campagne:</p>

<form action="" id="selectLang">
	<input type="radio" name="lang" id="all" checked="checked">Tous
	<input type="radio" name="lang" id="en" >Anglais
	<input type="radio" name="lang" id="fr" >Fran√ßais
	<input type="radio" name="lang" id="de" >Allemand
	<input type="button" value="valider" name="valider" onclick=""
		tal:attributes="onclick string:filter('${url}')" />
</form>

<div tal:define="capoZ here/getSurveillants" >
<table id="score" border="0" cellpadding="0" cellspacing="0">
	<tbody>
		<tr>
			<th>Nom</th>
			<th>Nombre de clicks</th>
			<th>Description</th>
		</tr>
		<div tal:omit-tag="" tal:repeat="capo capoZ" >
			<tr onclick=""
				tal:define="nieme repeat/capo/index"
				tal:attributes='onclick string:sendRequestAndChangeContent("${capo/Title}", "${capo/Title}/getDescription");
								class python:"parite"+str(nieme%2);'>
				<td tal:content="python:capo.Title">rank</td>
				<td tal:content="python:capo.getObject().getIterateur()">Nom</td>
				<td tal:content="python:capo.getObject().getDescription()">desc</td>
			</tr>
			<tr onclick=""
				tal:attributes='onclick string:hide("${capo/Title}")' 
				style="height:0px; padding:0px; margin:0px;">	
				<td colspan="2" class="folded">
					<div class="hidden" 
						id="" tal:attributes="id string:${capo/Title}">
					</div>
				</td>
			</tr>
		</div>
	</tbody>
</table>
</div>
</div>

</body>
</html>
