FILE(GLOB SRC *.cpp *.h *.def)

DECORATE_NEL_LIB("nel_drv_direct3d_win")
SET(NLDRV_D3D_LIB ${LIBNAME})
DECORATE_NEL_LIB("nel3d")
SET(NL3D_LIB ${LIBNAME})

ADD_LIBRARY(${NLDRV_D3D_LIB} SHARED ${SRC})

INCLUDE_DIRECTORIES(${LIBXML2_INCLUDE_DIR} ${FREETYPE_INC})
TARGET_LINK_LIBRARIES(${NLDRV_D3D_LIB} ${LIBXML2_LIBRARIES} ${FREETYPE_LIB} d3dx9.lib d3d9.lib dinput.lib dxguid.lib)
SET_TARGET_PROPERTIES(${NLDRV_D3D_LIB} PROPERTIES VERSION ${NL_VERSION})
SET_TARGET_PROPERTIES(${NLDRV_D3D_LIB} PROPERTIES COMPILE_FLAGS "/Yustddirect3d.h")
SET_SOURCE_FILES_PROPERTIES(stddirect3d.cpp PROPERTIES COMPILE_FLAGS "/Ycstddirect3d.h")
SET_TARGET_PROPERTIES(${NLDRV_D3D_LIB} PROPERTIES LINK_FLAGS "/NODEFAULTLIB:libcmt")
ADD_DEFINITIONS(/Ddriver_direct3d_EXPORTS)
ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})

