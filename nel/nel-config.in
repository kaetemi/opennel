#!/bin/sh

#
# $Id: nel-config.in,v 1.1 2001/05/02 17:11:33 valignat Exp $
#
# nel-config
#
# Script printing NeL's install library/include paths and some other
# informations like NeL's version
#

prefix=@prefix@
exec_prefix=@exec_prefix@

lib_dir=@libdir@
include_dir=@includedir@

usage()
{
    cat <<EOF
Usage: nel-config [OPTIONS] [LIBRARIES]
Options:
   [--prefix[=DIR]]
   [--exec-prefix[=DIR]]
   [--version]
   [--libs]
   [--libtool]
   [--cflags]
   [--without-3d]
   [--without-ai]
   [--without-network]
EOF
    exit $1
}

if test $# -eq 0
then
    usage 1 1>&2
fi

while test $# -gt 0
do
    case "$1" in
        -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
        *) optarg= ;;
    esac

    case $1 in
        --prefix=*)
            prefix=$optarg
            local_prefix=yes
            ;;
        --prefix)
            echo_prefix=yes
            ;;
        --exec-prefix=*)
            exec_prefix=$optarg
            exec_prefix_set=yes
            local_prefix=yes
            ;;
        --exec-prefix)
            echo_exec_prefix=yes
            ;;
        --version)
            echo @VERSION@
            exit 0
            ;;
        --cflags)
            echo_cflags=yes
            ;;
        --libs)
            echo_libs=yes
            ;;
        --libtool)
            echo_libtool=yes
            ;;
        --without-3d)
            without_3d=yes
            ;;
        --without-ai)
            without_ai=yes
            ;;
        --without-net|--without-network)
            without_net=yes
            ;;
        *)
            usage 1 1>&2
            ;;
    esac
    shift
done

if test "$local_prefix" = "yes"
then
    if test "$exec_prefix_set" != "yes"
    then
        exec_prefix=$prefix
    fi
fi

if test "$echo_prefix" = "yes"
then
    echo $prefix
fi

if test "$echo_exec_prefix" = "yes"
then
    echo $exec_prefix
fi

if test "$echo_cflags" = "yes"
then
    cflags="-I$include_dir/"
    echo $cflags
fi

if test "$echo_libs" = "yes"
then
    lib_misc="-lnelmisc"
    lib_3d="-lnel3d"
    lib_ai="-lnelai"
    lib_net="-lnelnet"

    libs="$lib_misc"

    if test "$without_3d" != "yes"
    then
        libs="$libs $lib_3d"
    fi

    if test "$without_ai" != "yes"
    then
        libs="$libs $lib_ai"
    fi

    if test "$without_net" != "yes"
    then
        libs="$libs $lib_net"
    fi

    echo -L@libdir@ $libs
fi

if test "$echo_libtool" = "yes"
then
    libtool_misc="$lib_dir/libnelmisc.la"
    libtool_3d="$lib_dir/libnel3d.la"
    libtool_ai="$lib_dir/libnelai.la"
    libtool_net="$lib_dir/libnelnet.la"

    libtool="$libtool_misc"

    if test "$without_3d" != "yes"
    then
        libtool="$libtool $libtool_3d"
    fi

    if test "$without_ai" != "yes"
    then
        libtool="$libtool $libtool_ai"
    fi

    if test "$without_net" != "yes"
    then
        libtool="$libtool $libtool_net"
    fi

    echo $libtool
fi

# EOF
